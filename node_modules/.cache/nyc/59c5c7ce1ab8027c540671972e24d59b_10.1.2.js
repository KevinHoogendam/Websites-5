var cov_2f7zzf4152=function(){var path='C:\\Users\\Kevin\\Documents\\GitHub\\Websites-5\\index.js',hash='0c16c5e39362dc793891d7bce0eee591b252a3e3',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'C:\\Users\\Kevin\\Documents\\GitHub\\Websites-5\\index.js',statementMap:{'0':{start:{line:1,column:14},end:{line:1,column:32}},'1':{start:{line:2,column:17},end:{line:2,column:39}},'2':{start:{line:3,column:19},end:{line:3,column:43}},'3':{start:{line:4,column:11},end:{line:4,column:26}},'4':{start:{line:5,column:15},end:{line:5,column:34}},'5':{start:{line:6,column:13},end:{line:6,column:30}},'6':{start:{line:7,column:13},end:{line:7,column:42}},'7':{start:{line:8,column:13},end:{line:8,column:21}},'8':{start:{line:9,column:14},end:{line:9,column:40}},'9':{start:{line:10,column:14},end:{line:10,column:43}},'10':{start:{line:11,column:15},end:{line:11,column:39}},'11':{start:{line:14,column:4},end:{line:14,column:18}},'12':{start:{line:15,column:4},end:{line:15,column:51}},'13':{start:{line:16,column:4},end:{line:16,column:65}},'14':{start:{line:17,column:4},end:{line:17,column:61}},'15':{start:{line:18,column:4},end:{line:18,column:91}},'16':{start:{line:19,column:4},end:{line:19,column:52}},'17':{start:{line:20,column:4},end:{line:20,column:27}},'18':{start:{line:21,column:4},end:{line:21,column:22}},'19':{start:{line:24,column:10},end:{line:24,column:19}},'20':{start:{line:26,column:0},end:{line:26,column:24}},'21':{start:{line:27,column:0},end:{line:27,column:27}},'22':{start:{line:28,column:0},end:{line:28,column:51}},'23':{start:{line:29,column:0},end:{line:29,column:24}},'24':{start:{line:33,column:0},end:{line:37,column:1}},'25':{start:{line:34,column:17},end:{line:34,column:51}},'26':{start:{line:35,column:8},end:{line:35,column:14}},'27':{start:{line:36,column:13},end:{line:36,column:46}},'28':{start:{line:38,column:0},end:{line:38,column:40}},'29':{start:{line:39,column:0},end:{line:39,column:35}},'30':{start:{line:43,column:16},end:{line:43,column:18}},'31':{start:{line:44,column:4},end:{line:44,column:57}},'32':{start:{line:45,column:4},end:{line:45,column:57}},'33':{start:{line:47,column:4},end:{line:47,column:42}},'34':{start:{line:51,column:19},end:{line:51,column:57}},'35':{start:{line:55,column:16},end:{line:55,column:48}},'36':{start:{line:59,column:4},end:{line:59,column:53}},'37':{start:{line:60,column:4},end:{line:60,column:62}},'38':{start:{line:61,column:4},end:{line:61,column:41}},'39':{start:{line:64,column:4},end:{line:64,column:60}},'40':{start:{line:65,column:4},end:{line:65,column:35}},'41':{start:{line:66,column:4},end:{line:66,column:32}},'42':{start:{line:67,column:4},end:{line:67,column:21}},'43':{start:{line:71,column:12},end:{line:71,column:57}},'44':{start:{line:72,column:12},end:{line:72,column:60}},'45':{start:{line:73,column:12},end:{line:73,column:47}},'46':{start:{line:75,column:0},end:{line:75,column:20}},'47':{start:{line:76,column:0},end:{line:76,column:25}},'48':{start:{line:77,column:0},end:{line:77,column:25}},'49':{start:{line:81,column:0},end:{line:81,column:21}},'50':{start:{line:82,column:0},end:{line:82,column:37}}},fnMap:{'0':{name:'handleError',decl:{start:{line:13,column:9},end:{line:13,column:20}},loc:{start:{line:13,column:51},end:{line:22,column:1}}}},branchMap:{'0':{loc:{start:{line:33,column:0},end:{line:37,column:1}},type:'switch',locations:[{start:{line:34,column:4},end:{line:35,column:14}},{start:{line:36,column:4},end:{line:36,column:46}}]},'1':{loc:{start:{line:82,column:11},end:{line:82,column:35}},type:'binary-expr',locations:[{start:{line:82,column:11},end:{line:82,column:27}},{start:{line:82,column:31},end:{line:82,column:35}}]}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0},f:{'0':0},b:{'0':[0,0],'1':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var express=(++cov_2f7zzf4152.s[0],require('express'));var bodyParser=(++cov_2f7zzf4152.s[1],require('body-parser'));var cookieParser=(++cov_2f7zzf4152.s[2],require('cookie-parser'));var path=(++cov_2f7zzf4152.s[3],require('path'));var mongoose=(++cov_2f7zzf4152.s[4],require('mongoose'));var multer=(++cov_2f7zzf4152.s[5],require('multer'));var config=(++cov_2f7zzf4152.s[6],require('./config/config.js'));var upload=(++cov_2f7zzf4152.s[7],multer());var session=(++cov_2f7zzf4152.s[8],require('express-session'));var exphbs=(++cov_2f7zzf4152.s[9],require('express-handlebars'));var flash=(++cov_2f7zzf4152.s[10],require('connect-flash'));function handleError(req,res,statusCode,message){++cov_2f7zzf4152.f[0];++cov_2f7zzf4152.s[11];console.log();++cov_2f7zzf4152.s[12];console.log('-------- Error handled --------');++cov_2f7zzf4152.s[13];console.log('Request Params: '+JSON.stringify(req.params));++cov_2f7zzf4152.s[14];console.log('Request Body: '+JSON.stringify(req.body));++cov_2f7zzf4152.s[15];console.log('Response sent: Statuscode '+statusCode+', Message "'+message+'"');++cov_2f7zzf4152.s[16];console.log('-------- /Error handled --------');++cov_2f7zzf4152.s[17];res.status(statusCode);++cov_2f7zzf4152.s[18];res.json(message);};var app=(++cov_2f7zzf4152.s[19],express());++cov_2f7zzf4152.s[20];app.use(cookieParser());++cov_2f7zzf4152.s[21];app.use(bodyParser.json());++cov_2f7zzf4152.s[22];app.use(bodyParser.urlencoded({extended:true}));++cov_2f7zzf4152.s[23];app.use(upload.array());// Setup mongoose connection
var connectionString;++cov_2f7zzf4152.s[24];switch(app.get('env')){case'test':++cov_2f7zzf4152.b[0][0];++cov_2f7zzf4152.s[25];connectionString=config.db.test;++cov_2f7zzf4152.s[26];break;default:++cov_2f7zzf4152.b[0][1];++cov_2f7zzf4152.s[27];connectionString=config.db.dev;}++cov_2f7zzf4152.s[28];mongoose.Promise=require('q').Promise;++cov_2f7zzf4152.s[29];mongoose.connect(connectionString);// /Setup mongoose connection
// Models
var model=(++cov_2f7zzf4152.s[30],{});++cov_2f7zzf4152.s[31];model.Race=require('./models/raceModel')(mongoose);++cov_2f7zzf4152.s[32];model.User=require('./models/userModel')(mongoose);++cov_2f7zzf4152.s[33];require('./test/fillTestData')(model);// /Models
// Passport
var passport=(++cov_2f7zzf4152.s[34],require('./auth/passport')(model.User));// /Passport
// Role based security
var roles=(++cov_2f7zzf4152.s[35],require('./auth/connectroles')());// /Role based security
// view engine setup
++cov_2f7zzf4152.s[36];app.set('views',path.join(__dirname,'views/'));++cov_2f7zzf4152.s[37];app.engine('handlebars',exphbs({defaultLayout:'main'}));++cov_2f7zzf4152.s[38];app.set('view engine','handlebars');// required for passport
++cov_2f7zzf4152.s[39];app.use(session({secret:'myappsecretisthisstring'}));// session secret
++cov_2f7zzf4152.s[40];app.use(passport.initialize());++cov_2f7zzf4152.s[41];app.use(passport.session());// persistent login sessions
++cov_2f7zzf4152.s[42];app.use(flash());// use connect-flash for flash messages stored in session
// /required for passport
//Require Routes
var login=(++cov_2f7zzf4152.s[43],require('./routes/login.js')(passport,roles));var races=(++cov_2f7zzf4152.s[44],require('./routes/races.js')(roles,handleError));var users=(++cov_2f7zzf4152.s[45],require('./routes/users.js')(roles));++cov_2f7zzf4152.s[46];app.use('/',login);++cov_2f7zzf4152.s[47];app.use('/races',races);++cov_2f7zzf4152.s[48];app.use('/users',users);// /Require Routes
++cov_2f7zzf4152.s[49];module.exports=app;++cov_2f7zzf4152.s[50];app.listen((++cov_2f7zzf4152.b[1][0],process.env.PORT)||(++cov_2f7zzf4152.b[1][1],3000));